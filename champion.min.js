!function(a){"use strict";var b=this,c=b.champ={},d=c.DOMEvents=["blur","focus","focusin","focusout","load","resize","scroll","unload","click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave","change","select","submit","keydown","keypress","keyup","error"];c.extend=function(a,b,c){var d=Object.create(a);c=c||[];for(var e in b)c.indexOf(e)>-1||(d[e]=b[e]);return d},c.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)})};var e=c.Module=function h(a){if(h.init="boolean"==typeof h.init?h.init:!0,a=a||{},this.id=a.id||c.guid(),h.init){for(var b in this.inject)a[this.inject[b]]=c.ioc.resolve(this.inject[b]);this._construct(a),this.init(a)}};e.prototype=c.extend(e.prototype,{_construct:function(a){this.properties=a},init:function(){},get:function(a){if("string"!=typeof a){for(var b={},c=0;c<a.length;c++)b[a[c]]=this.get(a[c]);return b}if(!a in this.properties)throw Error('"'+a+'" does not exist');return this.properties[a]},set:function(a,b){if("string"==typeof a)return-1===a.indexOf(".")?this.properties[a]=b:c.namespace.call(this.properties,a,b);for(var d in a)a.hasOwnProperty(d)&&this.set(d,a[d])}}),e.extend=function(a,b){if(arguments.length<2)throw Error("Must specify a name for extended module");e.init=!1;var d=this,f=new this;e.init=!0;var g=function(){return d.apply(this,arguments)};return g.prototype=c.extend(f,b),g.prototype.type=a,g.prototype.constructor=e,g.extend=e.extend,c.ioc.register(a,g),g};{var f=(c.namespace=function i(a,b){if("string"==typeof a)return i.call(this,a.split("."),b);var c=a.splice(0,1);return this[c]=this[c]||{},0===a.length?this[c]=null==b?this[c]:b:i.call(this[c],a,b)},c.ioc=function(){var a={},b=/^function[\s\w]*\((.*)\)[\s]*{/m,c=/\s*,\s*/,d=function(a){return a instanceof Array?a.splice(0,a.length-1):(b.exec(a)||"  ")[1].split(c)};return{register:function(b,c,d){if(!d&&a[b])throw Error("Dependency already registered");return a[b]=c instanceof Array?function(){return f.inject(c)()}:c,f},unregister:function(b){b="string"==typeof b?[b]:b;for(var c=0;c<b.length;c++)delete a[b[c]];return f},isRegistered:function(b){return!!a[b]},inject:function(b){var c=d(b);if(b=b instanceof Array?b[0]:b,!c[0].trim())return b;for(var e=0;e<c.length;e++){var g=a[c[e]];if(null==g)throw Error('"'+c[e]+'" was never registered');c[e]=g instanceof Function?f.inject(g):g}return b.bind.apply(b,[b].concat(c))},resolve:function(b){if("string"!=typeof b){var c=[];for(var d in b)c.push(f.resolve(b[d]));return c}if(!a[b])throw Error('"'+b+'" was never registered');return f.inject(a[b])},reset:function(){return a={},f}}}()),g=c.events=function(){var a={},b=10;return{trigger:function(b,c){var d=a[b]||[];for(var e in d)for(var f in d[e])d[e][f].handler(c,b);return this},on:function(c,d,e){var f=(e||{}).priority||b,g=(e||{}).context||d;a[c]=a[c]||[],a[c][f]=a[c][f]||[],d="function"==typeof d?[d]:d;for(var h=0;h<d.length;h++)a[c][f].push({handler:d[h].bind(g),id:d[h]});return this},off:function(b,c){a=0===arguments.length?{}:a;var d=a[b]||[];for(var e in d)for(var f in d[e])d[e][f].id==c&&d[e].splice(f,1);return this}}}();c.View=c.Module.extend("View",{_construct:function(b){this.container=b.container?a(b.container):a(this.container)||a("<div>"),this.$=c.extend(this.$||{},b.$||{});for(var d in this.$){var e=this.$[d].split(/\s*:\s*/),f=e.splice(0,1)[0];this.add(d,f,e)}},add:function(a,b,e){var f=this.container.find(b);return 0===f.length?!1:(this.$[a]=f,e="string"==typeof e?"*"===e.trim()?d.join(" "):e:(e||[]).join(" "),f.on(e,function(a,b){return function(d){c.events.trigger(a.type+":"+b+" "+d.type,d)}}(this,a)),void 0)}}),c.Model=c.Module.extend("Model",{_construct:function(){this.properties=c.extend({},this.properties),this._initState=c.extend({},this.properties)},property:function(a,b,c){if("string"==typeof a){if(null==this.properties[a]&&null==b)throw"Property doesn't exist";if(null==b)return this.properties[a];this.properties[a]=b,c||g.trigger(this.type+":changed",{property:a,value:b})}else for(var d in a)a.hasOwnProperty(d)&&this.property.call(this,d,a[d],b)},reset:function(){this.properties=c.extend({},this._initState)}}),c.Presenter=c.Module.extend("Presenter",{models:[],views:[],events:{},_construct:function(){this.views=c.ioc.resolve(this.views),this.models=c.ioc.resolve(this.models),this.view=this.views.length>0?this.views[0]:null,this.model=this.models.length>0?this.models[0]:null;for(var a in this.events){var b=a.split(/\s+/),d=b.splice(0,1);b=0===b.length?[" "]:b;for(var e in b){var f=d+(" "===b[e]?"":" "+b[e]);c.events.on(f,this[this.events[a]].bind(this))}}}})}}.call(this,jQuery);